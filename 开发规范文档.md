# HengBeGer é¡¹ç›®å¼€å‘è§„èŒƒæ–‡æ¡£

## ğŸ“‹ æ–‡æ¡£æ¦‚è¿°

æœ¬æ–‡æ¡£æ—¨åœ¨ä¸º HengBeGer é¡¹ç›®çš„æ–°åŠŸèƒ½å¼€å‘æä¾›è¯¦ç»†çš„å¼€å‘è§„èŒƒå’Œæœ€ä½³å®è·µæŒ‡å¯¼ã€‚è¯¥é¡¹ç›®æ˜¯ä¸€ä¸ªåŸºäº React 19 + Express.js + MySQL çš„å…¨æ ˆç»åŒºé›¶è§’è‰²å›¾é‰´ç³»ç»Ÿã€‚

---

## ğŸ—ï¸ 1. æ¨èçš„å¼€å‘æ–¹æ³•å’Œæœ€ä½³å®è·µ

### 1.1 å¼€å‘æµç¨‹

#### åŠŸèƒ½å¼€å‘æ ‡å‡†æµç¨‹
1. **éœ€æ±‚åˆ†æ**ï¼šæ˜ç¡®åŠŸèƒ½éœ€æ±‚å’Œç”¨æˆ·æ•…äº‹
2. **æ¶æ„è®¾è®¡**ï¼šç¡®å®šæ•°æ®æ¨¡å‹ã€API æ¥å£å’Œç»„ä»¶ç»“æ„
3. **æ•°æ®åº“è®¾è®¡**ï¼šå®šä¹‰è¡¨ç»“æ„å’Œå…³è”å…³ç³»
4. **åç«¯å¼€å‘**ï¼šå®ç° API æ¥å£å’Œä¸šåŠ¡é€»è¾‘
5. **å‰ç«¯å¼€å‘**ï¼šå®ç°ç”¨æˆ·ç•Œé¢å’Œäº¤äº’é€»è¾‘
6. **æµ‹è¯•éªŒè¯**ï¼šåŠŸèƒ½æµ‹è¯•å’Œé›†æˆæµ‹è¯•
7. **æ–‡æ¡£æ›´æ–°**ï¼šæ›´æ–°ç›¸å…³æ–‡æ¡£å’Œæ³¨é‡Š

#### ä»£ç æäº¤è§„èŒƒ
```bash
# æäº¤ä¿¡æ¯æ ¼å¼
<type>(<scope>): <subject>

# ç¤ºä¾‹
feat(agent): æ·»åŠ ä»£ç†äººç­›é€‰åŠŸèƒ½
fix(api): ä¿®å¤æ•°æ®åŒæ­¥é—®é¢˜
docs(readme): æ›´æ–°å®‰è£…è¯´æ˜
style(css): ä¼˜åŒ–å¡ç‰‡å¸ƒå±€æ ·å¼
refactor(context): é‡æ„æ•°æ®ä¸Šä¸‹æ–‡é€»è¾‘
```

### 1.2 è®¾è®¡æ¨¡å¼

#### å‰ç«¯æ¶æ„æ¨¡å¼
- **ç»„ä»¶åŒ–å¼€å‘**ï¼šéµå¾ªå•ä¸€èŒè´£åŸåˆ™ï¼Œç»„ä»¶åŠŸèƒ½æ˜ç¡®
- **çŠ¶æ€ç®¡ç†**ï¼šä½¿ç”¨ React Context è¿›è¡Œå…¨å±€çŠ¶æ€ç®¡ç†
- **æ•°æ®æµ**ï¼šå•å‘æ•°æ®æµï¼Œprops å‘ä¸‹ä¼ é€’ï¼Œäº‹ä»¶å‘ä¸Šå†’æ³¡
- **å“åº”å¼è®¾è®¡**ï¼šç§»åŠ¨ç«¯ä¼˜å…ˆï¼Œä½¿ç”¨ Flexbox å’Œ Grid å¸ƒå±€

#### åç«¯æ¶æ„æ¨¡å¼
- **åˆ†å±‚æ¶æ„**ï¼šè·¯ç”±å±‚ â†’ æœåŠ¡å±‚ â†’ æ•°æ®è®¿é—®å±‚ â†’ æ•°æ®åº“å±‚
- **RESTful API**ï¼šéµå¾ª REST è®¾è®¡åŸåˆ™
- **ä¸­é—´ä»¶æ¨¡å¼**ï¼šä½¿ç”¨ Express ä¸­é—´ä»¶å¤„ç†é€šç”¨é€»è¾‘
- **åŒå­˜å‚¨æ¨¡å¼**ï¼šç®¡ç†å‘˜ç«¯å’Œç½‘é¡µç«¯æ•°æ®åˆ†ç¦»

### 1.3 ç¼–ç è§„èŒƒ

#### JavaScript/JSX è§„èŒƒ
- ä½¿ç”¨ ES6+ è¯­æ³•ç‰¹æ€§
- ä¼˜å…ˆä½¿ç”¨ `const`ï¼Œå…¶æ¬¡ `let`ï¼Œé¿å… `var`
- ä½¿ç”¨ç®­å¤´å‡½æ•°å’Œè§£æ„èµ‹å€¼
- å¼‚æ­¥æ“ä½œä½¿ç”¨ `async/await` è€Œé Promise é“¾
- ç»„ä»¶ä½¿ç”¨å‡½æ•°å¼ç»„ä»¶å’Œ Hooks

#### æ–‡ä»¶ç»„ç»‡è§„èŒƒ
```
src/
â”œâ”€â”€ components/          # å¯å¤ç”¨ç»„ä»¶
â”‚   â”œâ”€â”€ common/         # é€šç”¨ç»„ä»¶
â”‚   â””â”€â”€ business/       # ä¸šåŠ¡ç»„ä»¶
â”œâ”€â”€ context/            # å…¨å±€çŠ¶æ€ç®¡ç†
â”œâ”€â”€ hooks/              # è‡ªå®šä¹‰ Hooks
â”œâ”€â”€ utils/              # å·¥å…·å‡½æ•°
â”œâ”€â”€ constants/          # å¸¸é‡å®šä¹‰
â”œâ”€â”€ assets/             # é™æ€èµ„æº
â””â”€â”€ styles/             # æ ·å¼æ–‡ä»¶
```

---

## ğŸ·ï¸ 2. å˜é‡å‘½åçº¦å®š

### 2.1 é€šç”¨å‘½åè§„èŒƒ

#### JavaScript å˜é‡å‘½å
- **é©¼å³°å‘½åæ³•**ï¼š`camelCase`
- **å¸¸é‡**ï¼š`UPPER_SNAKE_CASE`
- **ç§æœ‰å˜é‡**ï¼šä»¥ä¸‹åˆ’çº¿å¼€å¤´ `_privateVar`
- **å¸ƒå°”å€¼**ï¼šä»¥ `is`ã€`has`ã€`can`ã€`should` å¼€å¤´

```javascript
// âœ… æ­£ç¡®ç¤ºä¾‹
const userName = 'admin';
const isLoading = false;
const hasPermission = true;
const canEdit = false;
const shouldUpdate = true;
const API_BASE_URL = 'http://localhost:3001';
const _internalState = {};

// âŒ é”™è¯¯ç¤ºä¾‹
const user_name = 'admin';  // åº”ä½¿ç”¨é©¼å³°å‘½å
const loading = false;      // å¸ƒå°”å€¼åº”æœ‰æ˜ç¡®å‰ç¼€
const apibaseurl = 'url';   // å¸¸é‡åº”ä½¿ç”¨å¤§å†™
```

### 2.2 é¡¹ç›®ç‰¹å®šå˜é‡å‘½å

#### æ•°æ®ç›¸å…³å˜é‡
```javascript
// æ•°æ®é›†åˆ
const agents = [];           // ä»£ç†äººåˆ—è¡¨
const soundEngines = [];     // éŸ³æ“åˆ—è¡¨
const bumbos = [];           // é‚¦å¸ƒåˆ—è¡¨
const driveDisks = [];       // é©±åŠ¨ç›˜åˆ—è¡¨
const factions = [];         // é˜µè¥åˆ—è¡¨
const roles = [];            // èŒä¸šåˆ—è¡¨
const rarities = [];         // ç¨€æœ‰åº¦åˆ—è¡¨

// å•ä¸ªæ•°æ®é¡¹
const selectedAgent = null;  // é€‰ä¸­çš„ä»£ç†äºº
const currentUser = null;    // å½“å‰ç”¨æˆ·
const activeTab = 'agents';  // å½“å‰æ ‡ç­¾é¡µ

// çŠ¶æ€å˜é‡
const isLoading = false;     // åŠ è½½çŠ¶æ€
const hasError = false;      // é”™è¯¯çŠ¶æ€
const isEditing = false;     // ç¼–è¾‘çŠ¶æ€
const canDelete = false;     // åˆ é™¤æƒé™
```

#### ç»„ä»¶çŠ¶æ€å˜é‡
```javascript
// è¡¨å•ç›¸å…³
const formData = {};         // è¡¨å•æ•°æ®
const formErrors = {};       // è¡¨å•é”™è¯¯
const isFormValid = false;   // è¡¨å•éªŒè¯çŠ¶æ€
const isSubmitting = false;  // æäº¤çŠ¶æ€

// ç­›é€‰ç›¸å…³
const filters = {};          // ç­›é€‰æ¡ä»¶
const filteredData = [];     // ç­›é€‰åæ•°æ®
const searchQuery = '';      // æœç´¢å…³é”®è¯
const sortOrder = 'asc';     // æ’åºæ–¹å¼

// UI çŠ¶æ€
const isModalOpen = false;   // æ¨¡æ€æ¡†çŠ¶æ€
const isSidebarOpen = false; // ä¾§è¾¹æ çŠ¶æ€
const showPreview = false;   // é¢„è§ˆçŠ¶æ€
```

### 2.3 CSS ç±»åå‘½å

#### BEM å‘½åè§„èŒƒ
```css
/* å—ï¼ˆBlockï¼‰*/
.wiki-container { }
.agent-card { }
.filter-panel { }

/* å…ƒç´ ï¼ˆElementï¼‰*/
.agent-card__image { }
.agent-card__name { }
.agent-card__info { }
.filter-panel__button { }

/* ä¿®é¥°ç¬¦ï¼ˆModifierï¼‰*/
.agent-card--selected { }
.agent-card--loading { }
.filter-panel__button--active { }
```

---

## ğŸ”§ 3. å‡½æ•°å’Œæ–¹æ³•å‘½åçº¦å®š

### 3.1 å‡½æ•°å‘½åè§„èŒƒ

#### åŠ¨è¯å¼€å¤´çš„å‘½åæ¨¡å¼
```javascript
// è·å–æ•°æ®
const fetchAgents = async () => {};
const getAgentById = (id) => {};
const loadUserData = () => {};

// è®¾ç½®/æ›´æ–°æ•°æ®
const setActiveTab = (tab) => {};
const updateAgent = (id, data) => {};
const saveFormData = (data) => {};

// åˆ›å»º/æ·»åŠ æ•°æ®
const createAgent = (data) => {};
const addToFavorites = (id) => {};
const generateId = () => {};

// åˆ é™¤æ•°æ®
const deleteAgent = (id) => {};
const removeFromList = (id) => {};
const clearCache = () => {};

// éªŒè¯/æ£€æŸ¥
const validateForm = (data) => {};
const checkPermission = (user) => {};
const isValidEmail = (email) => {};

// å¤„ç†/è½¬æ¢
const processData = (data) => {};
const transformResponse = (response) => {};
const formatDate = (date) => {};
```

### 3.2 äº‹ä»¶å¤„ç†å‡½æ•°å‘½å

```javascript
// äº‹ä»¶å¤„ç†å‡½æ•°ä»¥ handle å¼€å¤´
const handleSubmit = (event) => {};
const handleInputChange = (event) => {};
const handleTabClick = (tab) => {};
const handleAgentSelect = (agent) => {};
const handleFilterChange = (filters) => {};
const handleModalClose = () => {};

// æˆ–ä½¿ç”¨ on å‰ç¼€
const onSubmit = (event) => {};
const onChange = (event) => {};
const onClick = (event) => {};
```

### 3.3 API å‡½æ•°å‘½å

```javascript
// API æœåŠ¡å‡½æ•°
const apiService = {
  // è·å–æ•°æ®
  fetchData: async () => {},
  fetchBaseData: async () => {},
  
  // CRUD æ“ä½œ
  addAgent: async (data) => {},
  updateAgent: async (id, data) => {},
  deleteAgent: async (id) => {},
  
  // æ‰¹é‡æ“ä½œ
  batchUpdateAgents: async (agents) => {},
  bulkDeleteAgents: async (ids) => {},
  
  // åŒæ­¥æ“ä½œ
  syncToStorage: async (data) => {},
  syncFromDatabase: async () => {}
};
```

### 3.4 å·¥å…·å‡½æ•°å‘½å

```javascript
// å·¥å…·å‡½æ•°åº“
const utils = {
  // æ•°æ®å¤„ç†
  flattenData: (data) => {},
  groupByProperty: (array, property) => {},
  sortByProperty: (array, property, order) => {},
  
  // å­—ç¬¦ä¸²å¤„ç†
  capitalizeFirst: (str) => {},
  slugify: (str) => {},
  truncateText: (text, length) => {},
  
  // æ—¥æœŸå¤„ç†
  formatTimestamp: (timestamp) => {},
  getRelativeTime: (date) => {},
  isValidDate: (date) => {},
  
  // éªŒè¯å‡½æ•°
  isEmptyObject: (obj) => {},
  hasProperty: (obj, prop) => {},
  isValidUrl: (url) => {}
};
```

---

## ğŸ“š 4. ç°æœ‰åŠŸèƒ½æ¨¡å—è¯¦ç»†è¯´æ˜

### 4.1 æ•°æ®ä¸Šä¸‹æ–‡æ¨¡å— (DataContext.jsx)

#### æ ¸å¿ƒçŠ¶æ€å˜é‡
```javascript
const DataContext = {
  // ä¸»è¦æ•°æ®é›†åˆ
  agents: [],          // ä»£ç†äººæ•°æ®æ•°ç»„
  soundEngines: [],    // éŸ³æ“æ•°æ®æ•°ç»„
  bumbos: [],          // é‚¦å¸ƒæ•°æ®æ•°ç»„
  driveDisks: [],      // é©±åŠ¨ç›˜æ•°æ®æ•°ç»„
  factions: [],        // é˜µè¥æ•°æ®æ•°ç»„
  roles: [],           // èŒä¸šæ•°æ®æ•°ç»„
  rarities: [],        // ç¨€æœ‰åº¦æ•°æ®æ•°ç»„
  
  // çŠ¶æ€ç®¡ç†
  loading: false,      // å…¨å±€åŠ è½½çŠ¶æ€
  error: null          // é”™è¯¯ä¿¡æ¯
};
```

#### å¯ç”¨çš„ API æœåŠ¡å‡½æ•°
```javascript
const apiService = {
  /**
   * è·å–æ‰€æœ‰æ•°æ®
   * @returns {Promise<Object>} åŒ…å«æ‰€æœ‰æ•°æ®çš„å¯¹è±¡
   */
  fetchData: async () => {
    // å®ç°ï¼šè°ƒç”¨ /api/data æ¥å£
    // è¿”å›ï¼š{ agents, soundEngines, bumbos, driveDisks, factions, roles, rarities }
  },
  
  /**
   * è·å–åŸºç¡€æ•°æ®ï¼ˆä¸åŒ…å«å…³è”ä¿¡æ¯ï¼‰
   * @returns {Promise<Object>} åŸºç¡€æ•°æ®å¯¹è±¡
   */
  fetchBaseData: async () => {
    // å®ç°ï¼šè°ƒç”¨ /api/base-data æ¥å£
  },
  
  /**
   * æ·»åŠ ä»£ç†äºº
   * @param {Object} agentData - ä»£ç†äººæ•°æ®
   * @returns {Promise<Object>} åˆ›å»ºçš„ä»£ç†äººå¯¹è±¡
   */
  addAgent: async (agentData) => {
    // å®ç°ï¼šPOST /api/agents
    // å‚æ•°ï¼š{ name, element, factionId, roleId, rarityId, image }
  },
  
  /**
   * æ›´æ–°ä»£ç†äºº
   * @param {number} id - ä»£ç†äººID
   * @param {Object} agentData - æ›´æ–°çš„æ•°æ®
   * @returns {Promise<Object>} æ›´æ–°åçš„ä»£ç†äººå¯¹è±¡
   */
  updateAgent: async (id, agentData) => {
    // å®ç°ï¼šPUT /api/agents/:id
  },
  
  /**
   * åˆ é™¤ä»£ç†äºº
   * @param {number} id - ä»£ç†äººID
   * @returns {Promise<boolean>} åˆ é™¤æˆåŠŸçŠ¶æ€
   */
  deleteAgent: async (id) => {
    // å®ç°ï¼šDELETE /api/agents/:id
  }
};
```

#### å¸¸é‡å®šä¹‰
```javascript
// API åŸºç¡€åœ°å€
const API_BASE_URL = 'http://localhost:3001';

// æ•°æ®ç±»å‹å¸¸é‡
const DATA_TYPES = {
  AGENTS: 'agents',
  SOUND_ENGINES: 'soundEngines',
  BUMBOS: 'bumbos',
  DRIVE_DISKS: 'driveDisks'
};
```

### 4.2 ç­›é€‰ç»„ä»¶æ¨¡å— (Filter.jsx)

#### ç­›é€‰é€‰é¡¹å¸¸é‡
```javascript
// èŒä¸šç­›é€‰é€‰é¡¹
const ROLES = [
  { id: 'all', name: 'å…¨éƒ¨', color: '#666' },
  { id: 'å¼ºæ”»', name: 'å¼ºæ”»', color: '#ff6b6b' },
  { id: 'å‡»ç ´', name: 'å‡»ç ´', color: '#4ecdc4' },
  { id: 'å¼‚å¸¸', name: 'å¼‚å¸¸', color: '#45b7d1' },
  { id: 'é˜²æŠ¤', name: 'é˜²æŠ¤', color: '#96ceb4' },
  { id: 'æ”¯æ´', name: 'æ”¯æ´', color: '#feca57' }
];

// å…ƒç´ ç­›é€‰é€‰é¡¹
const ELEMENTS = [
  { id: 'all', name: 'å…¨éƒ¨', color: '#666' },
  { id: 'ç‰©ç†', name: 'ç‰©ç†', color: '#8e44ad' },
  { id: 'ç«', name: 'ç«', color: '#e74c3c' },
  { id: 'å†°', name: 'å†°', color: '#3498db' },
  { id: 'ç”µ', name: 'ç”µ', color: '#f39c12' },
  { id: 'ä»¥å¤ª', name: 'ä»¥å¤ª', color: '#2ecc71' }
];

// é˜µè¥ç­›é€‰é€‰é¡¹
const FACTIONS = [
  { id: 'all', name: 'å…¨éƒ¨', color: '#666' },
  { id: 'ç»´å¤šåˆ©äºšå®¶æ”¿', name: 'ç»´å¤šåˆ©äºšå®¶æ”¿', color: '#e91e63' },
  { id: 'ç‹¡å…”å±‹', name: 'ç‹¡å…”å±‹', color: '#9c27b0' },
  { id: 'ç™½ç¥‡é‡å·¥', name: 'ç™½ç¥‡é‡å·¥', color: '#3f51b5' },
  { id: 'å…¬å®‰å±€', name: 'å…¬å®‰å±€', color: '#2196f3' },
  { id: 'ç»³åŒ åä¼š', name: 'ç»³åŒ åä¼š', color: '#00bcd4' }
];

// ç¨€æœ‰åº¦ç­›é€‰é€‰é¡¹
const RARITIES = [
  { id: 'all', name: 'å…¨éƒ¨', color: '#666' },
  { id: 'S', name: 'Sçº§', color: '#ffd700' },
  { id: 'A', name: 'Açº§', color: '#c0c0c0' }
];
```

#### ç­›é€‰ç»„ä»¶æ¥å£
```javascript
/**
 * ç­›é€‰ç»„ä»¶
 * @param {Object} props
 * @param {string} props.activeTab - å½“å‰æ´»è·ƒæ ‡ç­¾
 * @param {Object} props.filters - å½“å‰ç­›é€‰æ¡ä»¶
 * @param {Function} props.onFilterChange - ç­›é€‰å˜åŒ–å›è°ƒ
 */
const Filter = ({ activeTab, filters, onFilterChange }) => {
  // ç»„ä»¶å®ç°
};
```

### 4.3 æ•°æ®åº“æ¨¡å‹æ¨¡å—

#### Agent æ¨¡å‹ (models/agent.js)
```javascript
const Agent = {
  // å­—æ®µå®šä¹‰
  id: {
    type: DataTypes.INTEGER,
    primaryKey: true,
    autoIncrement: true
  },
  name: {
    type: DataTypes.STRING(100),
    allowNull: false,
    unique: true
  },
  element: {
    type: DataTypes.STRING(50),
    allowNull: false
  },
  image: {
    type: DataTypes.STRING(255),
    defaultValue: 'zzz.jpg'
  },
  factionId: {
    type: DataTypes.INTEGER,
    allowNull: true
  },
  roleId: {
    type: DataTypes.INTEGER,
    allowNull: true
  },
  rarityId: {
    type: DataTypes.INTEGER,
    allowNull: true
  }
};
```

#### å…¶ä»–æ¨¡å‹ç»“æ„
```javascript
// SoundEngine æ¨¡å‹
const SoundEngine = {
  id: INTEGER,
  name: STRING(100),
  rarity: STRING(10),
  role: STRING(50),
  image: STRING(255)
};

// Bumbo æ¨¡å‹
const Bumbo = {
  id: INTEGER,
  name: STRING(100),
  rarity: STRING(10),
  image: STRING(255)
};

// DriveDisk æ¨¡å‹
const DriveDisk = {
  id: INTEGER,
  name: STRING(100),
  rarity: STRING(10),
  image: STRING(255)
};
```

### 4.4 å­˜å‚¨ç®¡ç†æ¨¡å—

#### åŒå­˜å‚¨ç®¡ç†å™¨ (dualStorageManager.js)
```javascript
class DualStorageManager {
  /**
   * åˆå§‹åŒ–ç®¡ç†å‘˜ä¼šè¯
   * å¤åˆ¶ç½‘é¡µç«¯æ•°æ®åˆ°ç®¡ç†å‘˜ç«¯
   */
  async initializeAdminSession() {
    // å®ç°ï¼šå¤åˆ¶ web/ ç›®å½•æ•°æ®åˆ° admin/ ç›®å½•
  }
  
  /**
   * åŒæ­¥ç®¡ç†å‘˜æ•°æ®åˆ°ç½‘é¡µç«¯
   * @param {string} type - æ•°æ®ç±»å‹
   */
  async syncAdminToWeb(type) {
    // å®ç°ï¼šå°† admin/ ç›®å½•æ•°æ®åŒæ­¥åˆ° web/ ç›®å½•
  }
  
  /**
   * åˆ›å»ºæ•°æ®å¤‡ä»½
   * @param {string} type - æ•°æ®ç±»å‹
   * @param {string} source - æ•°æ®æº ('web' | 'admin')
   */
  async createBackup(type, source = 'web') {
    // å®ç°ï¼šåˆ›å»ºå¸¦æ—¶é—´æˆ³çš„å¤‡ä»½æ–‡ä»¶
  }
  
  /**
   * æ¸…ç†ç®¡ç†å‘˜ä¼šè¯
   */
  async cleanupAdminSession() {
    // å®ç°ï¼šæ¸…ç†ç®¡ç†å‘˜ç«¯ä¸´æ—¶æ•°æ®
  }
}
```

#### å­˜å‚¨è·¯å¾„å¸¸é‡
```javascript
const STORAGE_PATHS = {
  BASE: 'src/db/storage',
  WEB: 'src/db/storage/web',
  ADMIN: 'src/db/storage/admin',
  BACKUP: 'src/db/storage/backup'
};
```

### 4.5 æ•°æ®åº“é…ç½®æ¨¡å— (config.js)

#### é…ç½®å¯¹è±¡
```javascript
const baseDbConfig = {
  database: process.env.DB_NAME || 'hengbeger',
  username: process.env.DB_USER || 'root',
  host: process.env.DB_HOST || 'localhost',
  dialect: 'mysql',
  port: parseInt(process.env.DB_PORT) || 3306,
  retryAttempts: 3,
  retryDelay: 2000
};
```

#### å·¥å‚å‡½æ•°
```javascript
/**
 * åˆ›å»º Sequelize å®ä¾‹
 * @param {string} username - æ•°æ®åº“ç”¨æˆ·å
 * @param {string} password - æ•°æ®åº“å¯†ç 
 * @returns {Sequelize} Sequelize å®ä¾‹
 */
function createSequelizeInstance(username, password) {
  // è¿”å›é…ç½®å¥½çš„ Sequelize å®ä¾‹
}
```

### 4.6 åç«¯ API æ¨¡å— (server/index.js)

#### ä¸­é—´ä»¶é…ç½®
```javascript
// CORS é…ç½®
app.use(cors({
  origin: ['http://localhost:5173', 'http://127.0.0.1:5173'],
  credentials: true
}));

// è¯·æ±‚è§£æ
app.use(express.json({ limit: '50mb' }));
app.use(express.urlencoded({ extended: true, limit: '50mb' }));

// é™æ€æ–‡ä»¶æœåŠ¡
app.use(express.static('public'));

// å“åº”å¤´è®¾ç½®
app.use((req, res, next) => {
  res.setHeader('Content-Type', 'application/json; charset=utf-8');
  next();
});
```

#### å¯ç”¨çš„ API ç«¯ç‚¹
```javascript
// æ•°æ®è·å–
GET  /api/data              // è·å–æ‰€æœ‰æ•°æ®
GET  /api/base-data         // è·å–åŸºç¡€æ•°æ®
GET  /health                // å¥åº·æ£€æŸ¥

// ä»£ç†äºº CRUD
POST   /api/agents          // åˆ›å»ºä»£ç†äºº
GET    /api/agents          // è·å–ä»£ç†äººåˆ—è¡¨
GET    /api/agents/:id      // è·å–å•ä¸ªä»£ç†äºº
PUT    /api/agents/:id      // æ›´æ–°ä»£ç†äºº
DELETE /api/agents/:id      // åˆ é™¤ä»£ç†äºº

// å…¶ä»–æ•°æ®ç±»å‹çš„ CRUD æ“ä½œç±»ä¼¼
POST   /api/soundengines    // åˆ›å»ºéŸ³æ“
POST   /api/bumbos          // åˆ›å»ºé‚¦å¸ƒ
POST   /api/drivedisks      // åˆ›å»ºé©±åŠ¨ç›˜
```

---

## ğŸ¨ 5. æ ·å¼å’Œ UI è§„èŒƒ

### 5.1 CSS å˜é‡å®šä¹‰

```css
:root {
  /* ä¸»è‰²è°ƒ */
  --primary-color: #2c3e50;
  --secondary-color: #3498db;
  --accent-color: #e74c3c;
  
  /* èƒŒæ™¯è‰² */
  --bg-primary: #ecf0f1;
  --bg-secondary: #ffffff;
  --bg-dark: #34495e;
  
  /* æ–‡å­—è‰² */
  --text-primary: #2c3e50;
  --text-secondary: #7f8c8d;
  --text-light: #bdc3c7;
  
  /* è¾¹æ¡†å’Œé˜´å½± */
  --border-color: #ddd;
  --shadow-light: 0 2px 4px rgba(0,0,0,0.1);
  --shadow-medium: 0 4px 8px rgba(0,0,0,0.15);
  
  /* é—´è· */
  --spacing-xs: 4px;
  --spacing-sm: 8px;
  --spacing-md: 16px;
  --spacing-lg: 24px;
  --spacing-xl: 32px;
  
  /* åœ†è§’ */
  --border-radius-sm: 4px;
  --border-radius-md: 8px;
  --border-radius-lg: 12px;
}
```

### 5.2 å“åº”å¼æ–­ç‚¹

```css
/* ç§»åŠ¨ç«¯ä¼˜å…ˆçš„å“åº”å¼è®¾è®¡ */
@media (min-width: 768px) {
  /* å¹³æ¿æ ·å¼ */
}

@media (min-width: 1024px) {
  /* æ¡Œé¢æ ·å¼ */
}

@media (min-width: 1200px) {
  /* å¤§å±å¹•æ ·å¼ */
}
```

### 5.3 ç»„ä»¶æ ·å¼è§„èŒƒ

```css
/* å¡ç‰‡ç»„ä»¶æ ·å¼ */
.card {
  background: var(--bg-secondary);
  border-radius: var(--border-radius-md);
  box-shadow: var(--shadow-light);
  padding: var(--spacing-md);
  transition: all 0.3s ease;
}

.card:hover {
  box-shadow: var(--shadow-medium);
  transform: translateY(-2px);
}

/* æŒ‰é’®æ ·å¼ */
.btn {
  padding: var(--spacing-sm) var(--spacing-md);
  border-radius: var(--border-radius-sm);
  border: none;
  cursor: pointer;
  transition: all 0.3s ease;
  font-weight: 500;
}

.btn--primary {
  background: var(--primary-color);
  color: white;
}

.btn--secondary {
  background: var(--secondary-color);
  color: white;
}
```

---

## ğŸ”§ 6. å¼€å‘å·¥å…·å’Œé…ç½®

### 6.1 é¡¹ç›®è„šæœ¬å‘½ä»¤

```json
{
  "scripts": {
    "dev": "vite",
    "build": "vite build",
    "preview": "vite preview",
    "server": "node server/index.js",
    "start": "concurrently \"npm run server\" \"npm run dev\"",
    "init-db": "node src/db/initializeData.js",
    "launch": "node launch.js"
  }
}
```

### 6.2 ç¯å¢ƒå˜é‡é…ç½®

```bash
# .env æ–‡ä»¶ç¤ºä¾‹
DB_NAME=hengbeger
DB_USER=root
DB_PASSWORD=your_password
DB_HOST=localhost
DB_PORT=3306

SERVER_PORT=3001
VITE_API_URL=http://localhost:3001
```

### 6.3 Vite é…ç½®

```javascript
// vite.config.js
export default defineConfig({
  plugins: [react()],
  server: {
    port: 5173,
    proxy: {
      '/api': {
        target: 'http://localhost:3001',
        changeOrigin: true
      }
    }
  },
  build: {
    outDir: 'dist',
    sourcemap: true
  }
});
```

---

## ğŸ“ 7. æ–‡æ¡£å’Œæ³¨é‡Šè§„èŒƒ

### 7.1 JSDoc æ³¨é‡Šè§„èŒƒ

```javascript
/**
 * è·å–ç­›é€‰åçš„ä»£ç†äººæ•°æ®
 * @param {Array} agents - ä»£ç†äººæ•°ç»„
 * @param {Object} filters - ç­›é€‰æ¡ä»¶
 * @param {string} filters.role - èŒä¸šç­›é€‰
 * @param {string} filters.element - å…ƒç´ ç­›é€‰
 * @param {string} filters.faction - é˜µè¥ç­›é€‰
 * @param {string} filters.rarity - ç¨€æœ‰åº¦ç­›é€‰
 * @returns {Array} ç­›é€‰åçš„ä»£ç†äººæ•°ç»„
 * @example
 * const filtered = getFilteredAgents(agents, {
 *   role: 'å¼ºæ”»',
 *   element: 'ç«',
 *   faction: 'all',
 *   rarity: 'S'
 * });
 */
function getFilteredAgents(agents, filters) {
  // å®ç°é€»è¾‘
}
```

### 7.2 ç»„ä»¶æ–‡æ¡£è§„èŒƒ

```javascript
/**
 * ä»£ç†äººå¡ç‰‡ç»„ä»¶
 * 
 * @component
 * @param {Object} props
 * @param {Object} props.agent - ä»£ç†äººæ•°æ®å¯¹è±¡
 * @param {string} props.agent.name - ä»£ç†äººåç§°
 * @param {string} props.agent.element - å…ƒç´ å±æ€§
 * @param {string} props.agent.image - å›¾ç‰‡è·¯å¾„
 * @param {boolean} props.isSelected - æ˜¯å¦è¢«é€‰ä¸­
 * @param {Function} props.onClick - ç‚¹å‡»å›è°ƒå‡½æ•°
 * 
 * @example
 * <AgentCard 
 *   agent={agentData} 
 *   isSelected={selectedAgent?.id === agent.id}
 *   onClick={handleAgentClick}
 * />
 */
const AgentCard = ({ agent, isSelected, onClick }) => {
  // ç»„ä»¶å®ç°
};
```

---

## ğŸš€ 8. æ€§èƒ½ä¼˜åŒ–å»ºè®®

### 8.1 å‰ç«¯æ€§èƒ½ä¼˜åŒ–

- **ç»„ä»¶æ‡’åŠ è½½**ï¼šä½¿ç”¨ `React.lazy()` å’Œ `Suspense`
- **çŠ¶æ€ä¼˜åŒ–**ï¼šé¿å…ä¸å¿…è¦çš„é‡æ¸²æŸ“ï¼Œä½¿ç”¨ `useMemo` å’Œ `useCallback`
- **å›¾ç‰‡ä¼˜åŒ–**ï¼šä½¿ç”¨é€‚å½“çš„å›¾ç‰‡æ ¼å¼å’Œå°ºå¯¸
- **ä»£ç åˆ†å‰²**ï¼šæŒ‰è·¯ç”±æˆ–åŠŸèƒ½æ¨¡å—åˆ†å‰²ä»£ç 

### 8.2 åç«¯æ€§èƒ½ä¼˜åŒ–

- **æ•°æ®åº“æŸ¥è¯¢ä¼˜åŒ–**ï¼šä½¿ç”¨ç´¢å¼•ï¼Œé¿å… N+1 æŸ¥è¯¢
- **ç¼“å­˜ç­–ç•¥**ï¼šå®ç°é€‚å½“çš„ç¼“å­˜æœºåˆ¶
- **è¿æ¥æ± ç®¡ç†**ï¼šåˆç†é…ç½®æ•°æ®åº“è¿æ¥æ± 
- **å“åº”å‹ç¼©**ï¼šå¯ç”¨ gzip å‹ç¼©

---

## ğŸ” 9. è°ƒè¯•å’Œæµ‹è¯•

### 9.1 è°ƒè¯•å·¥å…·

```javascript
// å¼€å‘ç¯å¢ƒè°ƒè¯•
if (process.env.NODE_ENV === 'development') {
  console.log('Debug info:', data);
}

// ä½¿ç”¨ React DevTools
// ä½¿ç”¨ Redux DevTools (å¦‚æœä½¿ç”¨ Redux)
```

### 9.2 é”™è¯¯å¤„ç†

```javascript
// ç»Ÿä¸€é”™è¯¯å¤„ç†
const handleError = (error, context = '') => {
  console.error(`Error in ${context}:`, error);
  // å‘é€é”™è¯¯æŠ¥å‘Šåˆ°ç›‘æ§ç³»ç»Ÿ
  // æ˜¾ç¤ºç”¨æˆ·å‹å¥½çš„é”™è¯¯ä¿¡æ¯
};

// API é”™è¯¯å¤„ç†
try {
  const response = await fetch('/api/data');
  if (!response.ok) {
    throw new Error(`HTTP error! status: ${response.status}`);
  }
  const data = await response.json();
  return data;
} catch (error) {
  handleError(error, 'fetchData');
  throw error;
}
```

---

## ğŸ“‹ 10. å¼€å‘æ£€æŸ¥æ¸…å•

### 10.1 æ–°åŠŸèƒ½å¼€å‘æ£€æŸ¥æ¸…å•

- [ ] åŠŸèƒ½éœ€æ±‚æ˜ç¡®ï¼Œç”¨æˆ·æ•…äº‹å®Œæ•´
- [ ] æ•°æ®åº“æ¨¡å‹è®¾è®¡åˆç†
- [ ] API æ¥å£è®¾è®¡ç¬¦åˆ RESTful è§„èŒƒ
- [ ] å‰ç«¯ç»„ä»¶ç»“æ„æ¸…æ™°ï¼ŒèŒè´£å•ä¸€
- [ ] ä»£ç éµå¾ªé¡¹ç›®å‘½åè§„èŒƒ
- [ ] æ·»åŠ å¿…è¦çš„é”™è¯¯å¤„ç†
- [ ] ç¼–å†™é€‚å½“çš„æ³¨é‡Šå’Œæ–‡æ¡£
- [ ] è¿›è¡ŒåŠŸèƒ½æµ‹è¯•å’Œé›†æˆæµ‹è¯•
- [ ] æ£€æŸ¥å“åº”å¼è®¾è®¡å…¼å®¹æ€§
- [ ] éªŒè¯æ€§èƒ½è¡¨ç°
- [ ] æ›´æ–°ç›¸å…³æ–‡æ¡£

### 10.2 ä»£ç æäº¤å‰æ£€æŸ¥æ¸…å•

- [ ] ä»£ç æ ¼å¼åŒ–æ­£ç¡®
- [ ] æ²¡æœ‰ console.log ç­‰è°ƒè¯•ä»£ç 
- [ ] æ²¡æœ‰æœªä½¿ç”¨çš„å¯¼å…¥å’Œå˜é‡
- [ ] æäº¤ä¿¡æ¯æ ¼å¼æ­£ç¡®
- [ ] åŠŸèƒ½æµ‹è¯•é€šè¿‡
- [ ] æ²¡æœ‰ç ´åç°æœ‰åŠŸèƒ½

---

## ğŸ“ 11. æŠ€æœ¯æ”¯æŒå’Œèµ„æº

### 11.1 ç›¸å…³æ–‡æ¡£é“¾æ¥

- [React å®˜æ–¹æ–‡æ¡£](https://react.dev/)
- [Express.js æ–‡æ¡£](https://expressjs.com/)
- [Sequelize æ–‡æ¡£](https://sequelize.org/)
- [Vite æ–‡æ¡£](https://vitejs.dev/)
- [MySQL æ–‡æ¡£](https://dev.mysql.com/doc/)

### 11.2 é¡¹ç›®ç‰¹å®šæ–‡æ¡£

- [é¡¹ç›®æ¶æ„æ–‡æ¡£](./01-architecture.md)
- [è¯¦ç»†æ¶æ„åˆ†æ](./02-detailed-architecture.md)
- [é¡¹ç›®åˆ†ææŠ¥å‘Š](./03-project-analysis.md)
- [å¿«é€Ÿå¼€å§‹æŒ‡å—](./04-quick-start.md)
- [å¯åŠ¨å™¨ä½¿ç”¨æŒ‡å—](./05-startup-guide.md)

---

## ğŸ“ 12. æ›´æ–°æ—¥å¿—

### ç‰ˆæœ¬ 1.0.0 (2024-01-XX)
- åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
- å®ŒæˆåŸºç¡€å¼€å‘è§„èŒƒæ–‡æ¡£
- åŒ…å«æ‰€æœ‰æ ¸å¿ƒæ¨¡å—çš„è¯¦ç»†è¯´æ˜

---

**æ³¨æ„**ï¼šæœ¬æ–‡æ¡£ä¼šéšç€é¡¹ç›®çš„å‘å±•æŒç»­æ›´æ–°ï¼Œè¯·å®šæœŸæŸ¥çœ‹æœ€æ–°ç‰ˆæœ¬ã€‚å¦‚æœ‰ç–‘é—®æˆ–å»ºè®®ï¼Œè¯·è”ç³»é¡¹ç›®ç»´æŠ¤å›¢é˜Ÿã€‚